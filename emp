app.post("/StudentResultStatus/:studentRollNo", function (req, res) {
  const { studentRollNo, termTwoResultStatus } = req.body;
  studentDetails.findOne(
    { studentRollNo: studentRollNo },
    (err, RollNumber) => {
      if (RollNumber) {
        console.log("Roll Number is  present");
        termResultStatus.findOne(
          { studentRollNo: studentRollNo },
          (err, StudentRollNumber) => {
            if (StudentRollNumber) {
              console.log("Student Roll Number is presnet In  Term Schema");
              termResultStatus.findOne(
                { termTwoResultStatus: termTwoResultStatus },
                (err, termTwoResultStatus) => {
                  if (termOneResultStatus) {
                    res.send({ message: "Status Already update" });
                  } else {
                    console.log("need to save the status ");

                    const resultStatus = new termResultStatus({
                      termTwoResultStatus,
                    });
                    resultStatus.save((err) => {
                      if (err) {
                        res.send(err);
                      } else {
                        console.log("Result status Add Successfully");
                        res.send({ message: "Result status Add Successfully" });
                      }
                    });
                  }
                }
              );
            } else {
              console.log(
                "Student  Roll Number  is not Present  is Term Status Schema"
              );

              const resultStatus = new termResultStatus({
                studentRollNo,
                termTwoResultStatus,
              });
              resultStatus.save((err) => {
                if (err) {
                  res.send(err);
                } else {
                  console.log("Result status Add Successfully");
                  res.send({ message: "Result status Add Successfully" });
                }
              });
            }
          }
        );
      } else {
        console.log("Roll Number is not present");
        res.send({ message: "Roll Number is not present" });
      }
    }
  );
});

//
if (termTwoResultStatus || termTwoResultStatus || termThreeResultStatus) {
  res.send({ message: "Status Already update" });
} else {
  console.log("need to save the status ");

  const resultStatus = new termResultStatus({
    studentRollNo,
    termTwoResultStatus,
    termTwoResultStatus,
    termThreeResultStatus,
  });
  resultStatus.save((err) => {
    if (err) {
      res.send(err);
    } else {
      console.log("Result status Add Successfully");
      res.send({ message: "Result status Add Successfully" });
    }
  });
}
